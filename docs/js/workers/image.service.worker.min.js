/**
 * @license b-here v1.0.0
 * (c) 2020 Luca Zampetti <lzampetti@gmail.com>
 * License: MIT
 */
!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e={};function t(e,t,o){if(!self.createImageBitmap||!self.OffscreenCanvas)return n(e,t);self.createImageBitmap(t).then((function(t){var o=t.width,f=t.height;o>f?o>320&&(f*=320/o,o=320):f>240&&(o*=240/f,f=240);var a=new OffscreenCanvas(o,f),i=a.getContext("2d");a.width=o,a.height=f,i.drawImage(t,0,0,o,f),a.convertToBlob({type:"image/jpeg",quality:.9}).then((function(t){n(e,t)}))}))}function n(e,t){self.postMessage({src:e,blob:t})}self.addEventListener("message",(function(o){var f=o.data.id,a=o.data.src,i=o.data.size;if(!f||a){var r={mode:"cors"};if("function"==typeof fetch){if(self.AbortController){var s=new AbortController;r.signal=s.signal,e[f]=s}fetch(a,r).then((function(e){return e.blob()}),(function(e){console.log(e)})).then((function(o){delete e[f],"object"==typeof i?t(a,o):n(a,o)}),(function(e){console.log(e)}))}else{var c=new XMLHttpRequest;c.open("GET",a),c.responseType="blob",c.onload=function(){c.status<300&&("object"==typeof i?t(a,blob):n(a,blob))},c.onerror=function(){},c.send()}}else{var l=e[f];l&&l.abort()}}))}));
//# sourceMappingURL=image.service.worker.min.js.map